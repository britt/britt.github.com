{"version":3,"sources":["../src/index.js"],"names":[],"mappings":";;AAAA,OAAO,OAAP,GAAiB;AAAA,MAAE,QAAF,QAAE,QAAF;AAAA,SAAiB;AAChC,aAAS;AACP,eAAS;AACP,YADO,gBACD,IADC,EACK;AACV,cAAI,KAAK,+BAAT,EAA0C;AACxC;AACD;;AAED,cAAI,mBAAmB,KAAvB;AACA,cAAI,iBAAiB,KAArB;AACA,eAAK,GAAL,CAAS,MAAT,EAAiB,OAAjB,CAAyB,UAAC,IAAD,EAAU;AACjC,gBAAI,KAAK,0BAAL,EAAJ,EAAuC;AACrC,iCAAmB,IAAnB;AACA;AACD;AACD,gBAAI,KAAK,wBAAL,EAAJ,EAAqC;;AAEnC,kBAAM,aAAa,KAAK,GAAL,CAAS,aAAT,EAAwB,SAAxB,CAAkC,UAArD;AACA,kBAAM,6BAA6B,WAAW,MAAX,KAAsB,CAAtB,IAA2B,WAAW,CAAX,EAAc,QAAd,CAAuB,IAAvB,KAAgC,SAA9F;AACA,kBAAI,0BAAJ,EAAgC;AAC9B,mCAAmB,IAAnB;AACD,eAFD,MAEO;AACL,iCAAiB,IAAjB;AACD;AACD;AACD;AACF,WAhBD;;AAkBA,cAAI,oBAAoB,CAAC,cAAzB,EAAyC;AACvC,gBAAM,WAAW,EAAjB;AACA,qBAAS,IAAT,CAAc,SAAS,qCAAT,GAAd;;AAEA,iBAAK,aAAL,CAAmB,MAAnB,EAA2B,QAA3B;AACD;;AAED,eAAK,+BAAL,GAAuC,IAAvC;AACD;AAlCM;AADF;AADuB,GAAjB;AAAA,CAAjB","file":"index.js","sourcesContent":["module.exports = ({template}) => ({\n  visitor: {\n    Program: {\n      exit (path) {\n        if (path.BABEL_PLUGIN_ADD_MODULE_EXPORTS) {\n          return\n        }\n\n        let hasExportDefault = false\n        let hasExportNamed = false\n        path.get('body').forEach((path) => {\n          if (path.isExportDefaultDeclaration()) {\n            hasExportDefault = true\n            return\n          }\n          if (path.isExportNamedDeclaration()) {\n            // HACK detect export-from statements for default\n            const specifiers = path.get('declaration').container.specifiers\n            const isDefaultExportDeclaration = specifiers.length === 1 && specifiers[0].exported.name === 'default'\n            if (isDefaultExportDeclaration) {\n              hasExportDefault = true\n            } else {\n              hasExportNamed = true\n            }\n            return\n          }\n        })\n\n        if (hasExportDefault && !hasExportNamed) {\n          const topNodes = []\n          topNodes.push(template(\"module.exports = exports['default']\")())\n\n          path.pushContainer('body', topNodes)\n        }\n\n        path.BABEL_PLUGIN_ADD_MODULE_EXPORTS = true\n      }\n    }\n  }\n})\n"]}