// Reuse the Webpack loaders for pages to get
// access to the same information in Node.js context.
//
// This module handles the trickery around making
// this happen.
'use strict';

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }

var _eval2 = require('eval');

var _eval3 = _interopRequireDefault(_eval2);

var _fs = require('fs');

var _fs2 = _interopRequireDefault(_fs);

module.exports = function (parsed) {
  console.log('path', parsed);
  var file = _fs2['default'].readFileSync(parsed.absolute, 'utf-8');

  // Try requiring loader from site then
  // use Gatsby's loader as the fallback.
  var loader = require('../loaders/markdown-loader/index.js');
  var processed = loader(file);
  console.log('processed', processed);
  console.log((0, _eval3['default'])(processed));
  return (0, _eval3['default'])(processed);
};